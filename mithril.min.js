(function(){function t(a,c,f,h,n,k){return{tag:a,key:c,attrs:f,children:h,text:n,dom:k,domSize:void 0,state:void 0,events:void 0,instance:void 0,skip:!1}}function P(a){for(var c in a)if(F.call(a,c))return!1;return!0}function y(a){var c=arguments[1],f=2;if(null==a||"string"!==typeof a&&"function"!==typeof a&&"function"!==typeof a.view)throw Error("The selector must be either a string or a component.");if("string"===typeof a){var h;if(!(h=Q[a])){var n="div";for(var k=[],l={};h=U.exec(a);){var p=h[1],
q=h[2];""===p&&""!==q?n=q:"#"===p?l.id=q:"."===p?k.push(q):"["===h[3][0]&&((p=h[6])&&(p=p.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===h[4]?k.push(p):l[h[4]]=""===p?p:p||!0)}0<k.length&&(l.className=k.join(" "));h=Q[a]={tag:n,attrs:l}}}if(null==c)c={};else if("object"!==typeof c||null!=c.tag||Array.isArray(c))c={},f=1;if(arguments.length===f+1)n=arguments[f],Array.isArray(n)||(n=[n]);else for(n=[];f<arguments.length;)n.push(arguments[f++]);f=t.normalizeChildren(n);if("string"===typeof a){n=
!1;var m,w;k=c.className||c["class"];if(!P(h.attrs)&&!P(c)){l={};for(var d in c)F.call(c,d)&&(l[d]=c[d]);c=l}for(d in h.attrs)F.call(h.attrs,d)&&(c[d]=h.attrs[d]);void 0!==k&&(void 0!==c["class"]&&(c["class"]=void 0,c.className=k),null!=h.attrs.className&&(c.className=h.attrs.className+" "+k));for(d in c)if(F.call(c,d)&&"key"!==d){n=!0;break}Array.isArray(f)&&1===f.length&&null!=f[0]&&"#"===f[0].tag?w=f[0].children:m=f;return t(h.tag,c.key,n?c:void 0,m,w)}return t(a,c.key,c,f)}function V(a){var c=
0,f=null,h="function"===typeof requestAnimationFrame?requestAnimationFrame:setTimeout;return function(){var n=Date.now()-c;null===f&&(f=h(function(){f=null;a();c=Date.now()},16-n))}}t.normalize=function(a){return Array.isArray(a)?t("[",void 0,void 0,t.normalizeChildren(a),void 0,void 0):null!=a&&"object"!==typeof a?t("#",void 0,void 0,!1===a?"":a,void 0,void 0):a};t.normalizeChildren=function(a){for(var c=0;c<a.length;c++)a[c]=t.normalize(a[c]);return a};var U=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,
Q={},F={}.hasOwnProperty;y.trust=function(a){null==a&&(a="");return t("<",void 0,void 0,a,void 0,void 0)};y.fragment=function(a,c){return t("[",a.key,a,t.normalizeChildren(c),void 0,void 0)};var A=function(a){function c(a,d){return function B(c){var z;try{if(!d||null==c||"object"!==typeof c&&"function"!==typeof c||"function"!==typeof(z=c.then))m(function(){d||0!==a.length||console.error("Possible unhandled promise rejection:",c);for(var f=0;f<a.length;f++)a[f](c);n.length=0;k.length=0;q.state=d;q.retry=
function(){B(c)}});else{if(c===h)throw new TypeError("Promise can't be resolved w/ itself");f(z.bind(c))}}catch(X){p(X)}}}function f(a){function d(d){return function(a){0<c++||d(a)}}var c=0,q=d(p);try{a(d(l),q)}catch(B){q(B)}}if(!(this instanceof A))throw Error("Promise must be called with `new`");if("function"!==typeof a)throw new TypeError("executor must be a function");var h=this,n=[],k=[],l=c(n,!0),p=c(k,!1),q=h._instance={resolvers:n,rejectors:k},m="function"===typeof setImmediate?setImmediate:
setTimeout;f(a)};A.prototype.then=function(a,c){function f(a,c,f,l){c.push(function(d){if("function"!==typeof a)f(d);else try{n(a(d))}catch(x){k&&k(x)}});"function"===typeof h.retry&&l===h.state&&h.retry()}var h=this._instance,n,k,l=new A(function(a,c){n=a;k=c});f(a,h.resolvers,n,!0);f(c,h.rejectors,k,!1);return l};A.prototype["catch"]=function(a){return this.then(null,a)};A.resolve=function(a){return a instanceof A?a:new A(function(c){c(a)})};A.reject=function(a){return new A(function(c,f){f(a)})};
A.all=function(a){return new A(function(c,f){var h=a.length,n=0,k=[];if(0===a.length)c([]);else for(var l=0;l<a.length;l++)(function(l){function q(a){n++;k[l]=a;n===h&&c(k)}null==a[l]||"object"!==typeof a[l]&&"function"!==typeof a[l]||"function"!==typeof a[l].then?q(a[l]):a[l].then(q,f)})(l)})};A.race=function(a){return new A(function(c,f){for(var h=0;h<a.length;h++)a[h].then(c,f)})};"undefined"!==typeof window?("undefined"===typeof window.Promise&&(window.Promise=A),A=window.Promise):"undefined"!==
typeof global&&("undefined"===typeof global.Promise&&(global.Promise=A),A=global.Promise);var E=function(a){function c(a,h){if(Array.isArray(h))for(var l=0;l<h.length;l++)c(a+"["+l+"]",h[l]);else if("[object Object]"===Object.prototype.toString.call(h))for(l in h)c(a+"["+l+"]",h[l]);else f.push(encodeURIComponent(a)+(null!=h&&""!==h?"="+encodeURIComponent(h):""))}if("[object Object]"!==Object.prototype.toString.call(a))return"";var f=[],h;for(h in a)c(h,a[h]);return f.join("&")},Y=/^file:\/\//i,N=
function(a,c){function f(){function d(){0===--a&&"function"===typeof w&&w()}var a=0;return function W(c){var f=c.then;c.then=function(){a++;var q=f.apply(c,arguments);q.then(d,function(c){d();if(0===a)throw c;});return W(q)};return c}}function h(d,a){if("string"===typeof d){var c=d;d=a||{};null==d.url&&(d.url=c)}return d}function n(d,a){if(null==a)return d;for(var c=d.match(/:[^\/]+/gi)||[],f=0;f<c.length;f++){var q=c[f].slice(1);null!=a[q]&&(d=d.replace(c[f],a[q]))}return d}function k(d,a){var c=
E(a);if(""!==c){var f=0>d.indexOf("?")?"?":"&";d+=f+c}return d}function l(d){try{return""!==d?JSON.parse(d):null}catch(x){throw Error(d);}}function p(d){return d.responseText}function q(d,a){if("function"===typeof d)if(Array.isArray(a))for(var c=0;c<a.length;c++)a[c]=new d(a[c]);else return new d(a);return a}var m=0,w;return{request:function(d,m){var z=f();d=h(d,m);var x=new c(function(c,f){null==d.method&&(d.method="GET");d.method=d.method.toUpperCase();var h="GET"===d.method||"TRACE"===d.method?
!1:"boolean"===typeof d.useBody?d.useBody:!0;"function"!==typeof d.serialize&&(d.serialize="undefined"!==typeof FormData&&d.data instanceof FormData?function(d){return d}:JSON.stringify);"function"!==typeof d.deserialize&&(d.deserialize=l);"function"!==typeof d.extract&&(d.extract=p);d.url=n(d.url,d.data);h?d.data=d.serialize(d.data):d.url=k(d.url,d.data);var m=new a.XMLHttpRequest,z=!1,x=m.abort;m.abort=function(){z=!0;x.call(m)};m.open(d.method,d.url,"boolean"===typeof d.async?d.async:!0,"string"===
typeof d.user?d.user:void 0,"string"===typeof d.password?d.password:void 0);d.serialize!==JSON.stringify||!h||d.headers&&d.headers.hasOwnProperty("Content-Type")||m.setRequestHeader("Content-Type","application/json; charset=utf-8");d.deserialize!==l||d.headers&&d.headers.hasOwnProperty("Accept")||m.setRequestHeader("Accept","application/json, text/*");d.withCredentials&&(m.withCredentials=d.withCredentials);for(var w in d.headers)({}).hasOwnProperty.call(d.headers,w)&&m.setRequestHeader(w,d.headers[w]);
"function"===typeof d.config&&(m=d.config(m,d)||m);m.onreadystatechange=function(){if(!z&&4===m.readyState)try{var a=d.extract!==p?d.extract(m,d):d.deserialize(d.extract(m,d));if(200<=m.status&&300>m.status||304===m.status||Y.test(d.url))c(q(d.type,a));else{var h=Error(m.responseText);h.code=m.status;h.response=a;f(h)}}catch(G){f(G)}};h&&null!=d.data?m.send(d.data):m.send()});return!0===d.background?x:z(x)},jsonp:function(d,l){var z=f();d=h(d,l);var p=new c(function(c,f){var h=d.callbackName||"_mithril_"+
Math.round(1E16*Math.random())+"_"+m++,l=a.document.createElement("script");a[h]=function(f){l.parentNode.removeChild(l);c(q(d.type,f));delete a[h]};l.onerror=function(){l.parentNode.removeChild(l);f(Error("JSONP request failed"));delete a[h]};null==d.data&&(d.data={});d.url=n(d.url,d.data);d.data[d.callbackKey||"callback"]=h;l.src=k(d.url,d.data);a.document.documentElement.appendChild(l)});return!0===d.background?p:z(p)},setCompletionCallback:function(d){w=d}}}(window,A),T=function(a){function c(g,
b){if(g.state!==b)throw Error("`vnode.state` must not be modified");}function f(g){var b=g.state;try{return this.apply(b,arguments)}finally{c(g,b)}}function h(g,b,e,d,a,c,f){for(;e<d;e++){var h=b[e];null!=h&&n(g,h,a,f,c)}}function n(g,b,e,a,c){var f=b.tag;if("string"===typeof f)switch(b.state={},null!=b.attrs&&J(b.attrs,b,e),f){case "#":return b.dom=C.createTextNode(b.children),d(g,b.dom,c),b.dom;case "<":return k(g,b,c);case "[":var q=C.createDocumentFragment();null!=b.children&&(f=b.children,h(q,
f,0,f.length,e,null,a));b.dom=q.firstChild;b.domSize=q.childNodes.length;d(g,q,c);return q;default:var r=b.tag,m=(f=b.attrs)&&f.is;r=(a=b.attrs&&b.attrs.xmlns||F[b.tag]||a)?m?C.createElementNS(a,r,{is:m}):C.createElementNS(a,r):m?C.createElement(r,{is:m}):C.createElement(r);b.dom=r;if(null!=f)for(q in m=a,f)I(b,q,null,f[q],m);d(g,r,c);null!=b.attrs&&null!=b.attrs.contenteditable?x(b):(null!=b.text&&(""!==b.text?r.textContent=b.text:b.children=[t("#",void 0,void 0,b.text,void 0,void 0)]),null!=b.children&&
(g=b.children,h(r,g,0,g.length,e,null,a),g=b.attrs,"select"===b.tag&&null!=g&&("value"in g&&I(b,"value",null,g.value,void 0),"selectedIndex"in g&&I(b,"selectedIndex",null,g.selectedIndex,void 0))));return r}else return l(b,e),null!=b.instance?(e=n(g,b.instance,e,a,c),b.dom=b.instance.dom,b.domSize=null!=b.dom?b.instance.domSize:0,d(g,e,c),b=e):(b.domSize=0,b=G),b}function k(g,b,e){var a={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"}[(b.children.match(/^\s*?<(\w+)/im)||
[])[1]]||"div";a=C.createElement(a);a.innerHTML=b.children;b.dom=a.firstChild;b.domSize=a.childNodes.length;b=C.createDocumentFragment();for(var c;c=a.firstChild;)b.appendChild(c);d(g,b,e);return b}function l(g,b){if("function"===typeof g.tag.view){g.state=Object.create(g.tag);var e=g.state.view;if(null!=e.$$reentrantLock$$)return G;e.$$reentrantLock$$=!0}else{g.state=void 0;e=g.tag;if(null!=e.$$reentrantLock$$)return G;e.$$reentrantLock$$=!0;g.state=null!=g.tag.prototype&&"function"===typeof g.tag.prototype.view?
new g.tag(g):g.tag(g)}null!=g.attrs&&J(g.attrs,g,b);J(g.state,g,b);g.instance=t.normalize(f.call(g.state.view,g));if(g.instance===g)throw Error("A view cannot return the vnode it received as argument");e.$$reentrantLock$$=null}function p(g,b,e,a,c,f,l){if(!(b===e&&!a||null==b&&null==e))if(null==b)h(g,e,0,e.length,c,f,l);else if(null==e)z(b,0,b.length,e);else{if(b.length===e.length){for(var r=!1,k=0;k<e.length;k++)if(null!=e[k]&&null!=b[k]){r=null==e[k].key&&null==b[k].key;break}if(r){for(k=0;k<b.length;k++)if(b[k]!==
e[k]||a)null==b[k]&&null!=e[k]?n(g,e[k],c,l,w(b,k+1,f)):null==e[k]?z(b,k,k+1,e):q(g,b[k],e[k],c,w(b,k+1,f),a,l);return}}a:{if(null!=b.pool&&Math.abs(b.pool.length-e.length)<=Math.abs(b.length-e.length)&&(r=e[0]&&e[0].children&&e[0].children.length||0,Math.abs((b.pool[0]&&b.pool[0].children&&b.pool[0].children.length||0)-r)<=Math.abs((b[0]&&b[0].children&&b[0].children.length||0)-r))){r=!0;break a}r=!1}if(r){var p=b.pool;b=b.concat(b.pool)}var x=k=0;r=b.length-1;for(var D=e.length-1,H,u;r>=k&&D>=x;){var v=
b[k],t=e[x];u=null!=p&&k>=b.length-p.length;if(v!==t||u||a)if(null==v)k++;else if(null==t)x++;else if(v.key===t.key)k++,x++,q(g,v,t,c,w(b,k,f),u||a,l),u&&v.tag===t.tag&&d(g,m(v),f);else if(v=b[r],u=null!=p&&r>=b.length-p.length,v!==t||u||a)if(null==v)r--;else if(null==t)x++;else if(v.key===t.key)q(g,v,t,c,w(b,r+1,f),u||a,l),(u&&v.tag===t.tag||x<D)&&d(g,m(v),w(b,k,f)),r--,x++;else break;else r--,x++;else k++,x++}for(;r>=k&&D>=x;){v=b[r];t=e[D];u=null!=p&&r>=b.length-p.length;if(v!==t||u||a)if(null==
v)r--;else{if(null!=t)if(v.key===t.key)q(g,v,t,c,w(b,r+1,f),u||a,l),u&&v.tag===t.tag&&d(g,m(v),f),null!=v.dom&&(f=v.dom),r--;else{if(!H){H=b;u=r;v={};var B;for(B=0;B<u;B++){var y=H[B];null!=y&&(y=y.key,null!=y&&(v[y]=B))}H=v}null!=t&&(v=H[t.key],null!=v?(B=b[v],u=null!=p&&v>=b.length-p.length,q(g,B,t,c,w(b,r+1,f),u||a,l),d(g,m(B),f),b[v].skip=!0,null!=B.dom&&(f=B.dom)):f=n(g,t,c,l,f))}D--}else r--,D--;if(D<x)break}h(g,e,x,D+1,c,f,l);z(b,k,Math.min(r+1,null==p?b.length:b.length-p.length),e);if(null!=
p)for(g=Math.max(k,b.length-p.length);r>=g;r--)b[r].skip?b[r].skip=!1:A(b[r],e)}}function q(g,b,e,a,d,c,h){var r=b.tag;if(r===e.tag){e.state=b.state;e.events=b.events;var z;if(z=!c){var w,D;null!=e.attrs&&"function"===typeof e.attrs.onbeforeupdate&&(w=f.call(e.attrs.onbeforeupdate,e,b));"string"!==typeof e.tag&&"function"===typeof e.state.onbeforeupdate&&(D=f.call(e.state.onbeforeupdate,e,b));void 0===w&&void 0===D||w||D?z=!1:(e.dom=b.dom,e.domSize=b.domSize,e.instance=b.instance,z=!0)}if(!z)if("string"===
typeof r)switch(null!=e.attrs&&(c?(e.state={},J(e.attrs,e,a)):L(e.attrs,e,a)),r){case "#":b.children.toString()!==e.children.toString()&&(b.dom.nodeValue=e.children);e.dom=b.dom;break;case "<":b.children!==e.children?(m(b),k(g,e,d)):(e.dom=b.dom,e.domSize=b.domSize);break;case "[":p(g,b.children,e.children,c,a,d,h);b=0;a=e.children;e.dom=null;if(null!=a){for(c=0;c<a.length;c++){var u=a[c];null!=u&&null!=u.dom&&(null==e.dom&&(e.dom=u.dom),b+=u.domSize||1)}1!==b&&(e.domSize=b)}break;default:g=e.dom=
b.dom;h=e.attrs&&e.attrs.xmlns||F[e.tag]||h;"textarea"===e.tag&&(null==e.attrs&&(e.attrs={}),null!=e.text&&(e.attrs.value=e.text,e.text=void 0));d=b.attrs;r=e.attrs;z=h;if(null!=r)for(u in r)I(e,u,d&&d[u],r[u],z);if(null!=d)for(u in d)null!=r&&u in r||("className"===u&&(u="class"),"o"!==u[0]||"n"!==u[1]||R(u)?"key"!==u&&e.dom.removeAttribute(u):S(e,u,void 0));null!=e.attrs&&null!=e.attrs.contenteditable?x(e):null!=b.text&&null!=e.text&&""!==e.text?b.text.toString()!==e.text.toString()&&(b.dom.firstChild.nodeValue=
e.text):(null!=b.text&&(b.children=[t("#",void 0,void 0,b.text,void 0,b.dom.firstChild)]),null!=e.text&&(e.children=[t("#",void 0,void 0,e.text,void 0,void 0)]),p(g,b.children,e.children,c,a,null,h))}else{if(c)l(e,a);else{e.instance=t.normalize(f.call(e.state.view,e));if(e.instance===e)throw Error("A view cannot return the vnode it received as argument");null!=e.attrs&&L(e.attrs,e,a);L(e.state,e,a)}null!=e.instance?(null==b.instance?n(g,e.instance,a,h,d):q(g,b.instance,e.instance,a,d,c,h),e.dom=e.instance.dom,
e.domSize=e.instance.domSize):null!=b.instance?(B(b.instance,null),e.dom=void 0,e.domSize=0):(e.dom=b.dom,e.domSize=b.domSize)}}else B(b,null),n(g,e,a,h,d)}function m(g){var b=g.domSize;if(null!=b||null==g.dom){var a=C.createDocumentFragment();if(0<b){for(g=g.dom;--b;)a.appendChild(g.nextSibling);a.insertBefore(g,a.firstChild)}return a}return g.dom}function w(g,b,a){for(;b<g.length;b++)if(null!=g[b]&&null!=g[b].dom)return g[b].dom;return a}function d(g,b,a){a&&a.parentNode?g.insertBefore(b,a):g.appendChild(b)}
function x(g){var b=g.children;if(null!=b&&1===b.length&&"<"===b[0].tag)b=b[0].children,g.dom.innerHTML!==b&&(g.dom.innerHTML=b);else if(null!=g.text||null!=b&&0!==b.length)throw Error("Child node of a contenteditable must be trusted");}function z(g,b,a,d){for(;b<a;b++){var e=g[b];null!=e&&(e.skip?e.skip=!1:B(e,d))}}function B(g,b){function a(){if(++h===d&&(c(g,q),y(g),g.dom)){var a=g.domSize||1;if(1<a)for(var e=g.dom;--a;){var f=e.nextSibling,k=f.parentNode;null!=k&&k.removeChild(f)}a=g.dom;e=a.parentNode;
null!=e&&e.removeChild(a);A(g,b)}}var d=1,h=0,q=g.state;if(g.attrs&&"function"===typeof g.attrs.onbeforeremove){var k=f.call(g.attrs.onbeforeremove,g);null!=k&&"function"===typeof k.then&&(d++,k.then(a,a))}"string"!==typeof g.tag&&"function"===typeof g.state.onbeforeremove&&(k=f.call(g.state.onbeforeremove,g),null!=k&&"function"===typeof k.then&&(d++,k.then(a,a)));a()}function A(a,b){var g;if(g=null!=b&&null==a.domSize)g=a.attrs,g=!(null!=g&&(g.oncreate||g.onupdate||g.onbeforeremove||g.onremove));
g&&"string"===typeof a.tag&&(b.pool?b.pool.push(a):b.pool=[a])}function y(a){a.attrs&&"function"===typeof a.attrs.onremove&&f.call(a.attrs.onremove,a);if("string"!==typeof a.tag)"function"===typeof a.state.onremove&&f.call(a.state.onremove,a),null!=a.instance&&y(a.instance);else if(a=a.children,Array.isArray(a))for(var b=0;b<a.length;b++){var g=a[b];null!=g&&y(g)}}function I(a,b,d,c,f){if("key"!==b&&"is"!==b&&!R(b)){if("o"===b[0]&&"n"===b[1])return S(a,b,c);if((d!==c||"value"===b||"checked"===b||
"selectedIndex"===b||"selected"===b&&a.dom===C.activeElement||a.dom.parentNode===C.activeElement||"object"===typeof c)&&void 0!==c){var g=a.dom;if("xlink:"===b.slice(0,6))g.setAttributeNS("http://www.w3.org/1999/xlink",b,c);else if("style"===b)if(a=d,null!=a&&null!=c&&"object"===typeof a&&"object"===typeof c&&c!==a){for(var e in c)c[e]!==a[e]&&(g.style[e]=c[e]);for(e in a)e in c||(g.style[e]="")}else if(a===c&&(g.style.cssText="",a=null),null==c)g.style.cssText="";else if("string"===typeof c)g.style.cssText=
c;else for(e in"string"===typeof a&&(g.style.cssText=""),c)g.style[e]=c[e];else if(b in g&&"href"!==b&&"list"!==b&&"form"!==b&&"width"!==b&&"height"!==b&&void 0===f&&!(a.attrs.is||-1<a.tag.indexOf("-"))){if("value"===b){e=""+c;if(("input"===a.tag||"textarea"===a.tag)&&a.dom.value===e&&a.dom===C.activeElement)return;if("select"===a.tag)if(null===c){if(-1===a.dom.selectedIndex&&a.dom===C.activeElement)return}else if(null!==d&&a.dom.value===e&&a.dom===C.activeElement)return;if("option"===a.tag&&null!=
d&&a.dom.value===e)return}"input"===a.tag&&"type"===b?g.setAttribute(b,c):g[b]=c}else"boolean"===typeof c?c?g.setAttribute(b,""):g.removeAttribute(b):g.setAttribute("className"===b?"class":b,c)}}}function R(a){return"oninit"===a||"oncreate"===a||"onupdate"===a||"onremove"===a||"onbeforeremove"===a||"onbeforeupdate"===a}function M(){}function S(a,b,d){null!=a.events?a.events[b]!==d&&(null==d||"function"!==typeof d&&"object"!==typeof d?(null!=a.events[b]&&a.dom.removeEventListener(b.slice(2),a.events,
!1),a.events[b]=void 0):(null==a.events[b]&&a.dom.addEventListener(b.slice(2),a.events,!1),a.events[b]=d)):null==d||"function"!==typeof d&&"object"!==typeof d||(a.events=new M,a.dom.addEventListener(b.slice(2),a.events,!1),a.events[b]=d)}function J(a,b,d){"function"===typeof a.oninit&&f.call(a.oninit,b);"function"===typeof a.oncreate&&d.push(f.bind(a.oncreate,b))}function L(a,b,d){"function"===typeof a.onupdate&&d.push(f.bind(a.onupdate,b))}var C=a.document,G=C.createDocumentFragment(),F={svg:"http://www.w3.org/2000/svg",
math:"http://www.w3.org/1998/Math/MathML"},E;M.prototype=Object.create(null);M.prototype.handleEvent=function(a){var b=this["on"+a.type];"function"===typeof b?b.call(a.target,a):"function"===typeof b.handleEvent&&b.handleEvent(a);"function"===typeof E&&E.call(a.target,a)};return{render:function(a,b){if(!a)throw Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var d=[],c=C.activeElement,g=a.namespaceURI;null==a.vnodes&&(a.textContent="");Array.isArray(b)||
(b=[b]);p(a,a.vnodes,t.normalizeChildren(b),!1,d,null,"http://www.w3.org/1999/xhtml"===g?void 0:g);a.vnodes=b;null!=c&&C.activeElement!==c&&c.focus();for(c=0;c<d.length;c++)d[c]()},setEventCallback:function(a){return E=a}}},K=function(a,c){function f(a){a=k.indexOf(a);-1<a&&k.splice(a,2)}function h(){if(l)throw Error("Nested m.redraw.sync() call");l=!0;for(var a=1;a<k.length;a+=2)try{k[a]()}catch(m){"undefined"!==typeof console&&console.error(m)}l=!1}var n=T(a);n.setEventCallback(function(a){!1===
a.redraw?a.redraw=void 0:p()});var k=[],l=!1,p=(c||V)(h);p.sync=h;return{subscribe:function(a,c){f(a);k.push(a,c)},unsubscribe:f,redraw:p,render:n.render}}(window);N.setCompletionCallback(K.redraw);y.mount=function(a){return function(c,f){if(null===f)a.render(c,[]),a.unsubscribe(c);else{if(null==f.view&&"function"!==typeof f)throw Error("m.mount(element, component) expects a component, not a vnode");var h=function(){a.render(c,t(f))};a.subscribe(c,h);h()}}}(K);var Z=A,O=function(a){if(""===a||null==
a)return{};"?"===a.charAt(0)&&(a=a.slice(1));a=a.split("&");for(var c={},f={},h=0;h<a.length;h++){var n=a[h].split("="),k=decodeURIComponent(n[0]);n=2===n.length?decodeURIComponent(n[1]):"";"true"===n?n=!0:"false"===n&&(n=!1);var l=k.split(/\]\[?|\[/),p=c;-1<k.indexOf("[")&&l.pop();for(var q=0;q<l.length;q++){k=l[q];var m=l[q+1];m=""==m||!isNaN(parseInt(m,10));var t=q===l.length-1;""===k&&(k=l.slice(0,q).join(),null==f[k]&&(f[k]=0),k=f[k]++);null==p[k]&&(p[k]=t?n:m?[]:{});p=p[k]}}return c},aa=function(a){function c(c){var f=
a.location[c].replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent);"pathname"===c&&"/"!==f[0]&&(f="/"+f);return f}function f(a){return function(){null==l&&(l=k(function(){l=null;a()}))}}function h(a,c,f){var d=a.indexOf("?"),h=a.indexOf("#"),k=-1<d?d:-1<h?h:a.length;if(-1<d){d=O(a.slice(d+1,-1<h?h:a.length));for(var l in d)c[l]=d[l]}if(-1<h)for(l in c=O(a.slice(h+1)),c)f[l]=c[l];return a.slice(0,k)}var n="function"===typeof a.history.pushState,k="function"===typeof setImmediate?setImmediate:setTimeout,
l,p={prefix:"#!",getPath:function(){switch(p.prefix.charAt(0)){case "#":return c("hash").slice(p.prefix.length);case "?":return c("search").slice(p.prefix.length)+c("hash");default:return c("pathname").slice(p.prefix.length)+c("search")+c("hash")}},setPath:function(c,f,k){var d={},l={};c=h(c,d,l);if(null!=f){for(var m in f)d[m]=f[m];c=c.replace(/:([^\/]+)/g,function(a,c){delete d[c];return f[c]})}(m=E(d))&&(c+="?"+m);(l=E(l))&&(c+="#"+l);n?(l=k?k.state:null,m=k?k.title:null,a.onpopstate(),k&&k.replace?
a.history.replaceState(l,m,p.prefix+c):a.history.pushState(l,m,p.prefix+c)):a.location.href=p.prefix+c},defineRoutes:function(c,k,l){function d(){var d=p.getPath(),f={},m=h(d,f,f),n=a.history.state;if(null!=n)for(var q in n)f[q]=n[q];for(var t in c)if(n=new RegExp("^"+t.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$"),n.test(m)){m.replace(n,function(){for(var a=t.match(/:[^\/]+/g)||[],h=[].slice.call(arguments,1,-2),l=0;l<a.length;l++)f[a[l].replace(/:|\./g,"")]=decodeURIComponent(h[l]);
k(c[t],f,d,t)});return}l(d,f)}n?a.onpopstate=f(d):"#"===p.prefix.charAt(0)&&(a.onhashchange=d);d()}};return p};y.route=function(a,c){var f=aa(a),h=function(a){return a},n,k,l,p,q,m=function(a,m,z){function d(){null!=n&&c.render(a,n(t(k,l.key,l)))}if(null==a)throw Error("Ensure the DOM element that was passed to `m.route` is not undefined");var x=function(){d();x=c.redraw};c.subscribe(a,d);var w=function(a){if(a!==m)f.setPath(m,null,{replace:!0});else throw Error("Could not resolve default route "+
m);};f.defineRoutes(z,function(a,d,c){var f=q=function(a,m){f===q&&(k=null==m||"function"!==typeof m.view&&"function"!==typeof m?"div":m,l=d,p=c,q=null,n=(a.render||h).bind(a),x())};a.view||"function"===typeof a?f({},a):a.onmatch?Z.resolve(a.onmatch(d,c)).then(function(d){f(a,d)},w):f(a,"div")},w)};m.set=function(a,c,h){null!=q&&(h=h||{},h.replace=!0);q=null;f.setPath(a,c,h)};m.get=function(){return p};m.prefix=function(a){f.prefix=a};var w=function(a,c){c.dom.setAttribute("href",f.prefix+c.attrs.href);
c.dom.onclick=function(c){c.ctrlKey||c.metaKey||c.shiftKey||2===c.which||(c.preventDefault(),c.redraw=!1,c=this.getAttribute("href"),0===c.indexOf(f.prefix)&&(c=c.slice(f.prefix.length)),m.set(c,void 0,a))}};m.link=function(a){return null==a.tag?w.bind(w,a):w({},a)};m.param=function(a){return"undefined"!==typeof l&&"undefined"!==typeof a?l[a]:l};return m}(window,K);y.withAttr=function(a,c,f){return function(h){c.call(f||this,a in h.currentTarget?h.currentTarget[a]:h.currentTarget.getAttribute(a))}};
var ba=T(window);y.render=ba.render;y.redraw=K.redraw;y.request=N.request;y.jsonp=N.jsonp;y.parseQueryString=O;y.buildQueryString=E;y.version="1.1.3";y.vnode=t;"undefined"!==typeof module?module.exports=y:window.m=y})();