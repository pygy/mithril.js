(function(){function w(b,d,e,f,m,n){return{tag:b,key:d,attrs:e,children:f,text:m,dom:n,domSize:void 0,state:void 0,events:void 0,instance:void 0,skip:!1,reuse:void 0}}function O(b){for(var d in b)if(D.call(b,d))return!1;return!0}function u(b){var d=arguments[1],e=2;if(null==b||"string"!==typeof b&&"function"!==typeof b&&"function"!==typeof b.view)throw Error("The selector must be either a string or a component.");if("string"===typeof b){var f;if(!(f=P[b])){var m="div";for(var n=[],h={};f=U.exec(b);){var k=
f[1],t=f[2];""===k&&""!==t?m=t:"#"===k?h.id=t:"."===k?n.push(t):"["===f[3][0]&&((k=f[6])&&(k=k.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===f[4]?n.push(k):h[f[4]]=""===k?k:k||!0)}0<n.length&&(h.className=n.join(" "));f=P[b]={tag:m,attrs:h}}}if(null==d)d={};else if("object"!==typeof d||null!=d.tag||Array.isArray(d))d={},e=1;if(arguments.length===e+1)m=arguments[e],Array.isArray(m)||(m=[m]);else for(m=[];e<arguments.length;)m.push(arguments[e++]);e=w.normalizeChildren(m);if("string"===
typeof b){m=!1;var l,A;n=d.className||d["class"];if(!O(f.attrs)&&!O(d)){h={};for(var a in d)D.call(d,a)&&(h[a]=d[a]);d=h}for(a in f.attrs)D.call(f.attrs,a)&&(d[a]=f.attrs[a]);void 0!==n&&(void 0!==d["class"]&&(d["class"]=void 0,d.className=n),null!=f.attrs.className&&(d.className=f.attrs.className+" "+n));for(a in d)if(D.call(d,a)&&"key"!==a){m=!0;break}Array.isArray(e)&&1===e.length&&null!=e[0]&&"#"===e[0].tag?A=e[0].children:l=e;return w(f.tag,d.key,m?d:void 0,l,A)}return w(b,d.key,d,e)}function V(b){var d=
0,e=null,f="function"===typeof requestAnimationFrame?requestAnimationFrame:setTimeout;return function(){var m=Date.now()-d;null===e&&(e=f(function(){e=null;b();d=Date.now()},16-m))}}w.normalize=function(b){return Array.isArray(b)?w("[",void 0,void 0,w.normalizeChildren(b),void 0,void 0):!1===b?null:null!=b&&"object"!==typeof b?w("#",void 0,void 0,b,void 0,void 0):b};w.normalizeChildren=function(b){for(var d=0;d<b.length;d++)b[d]=w.normalize(b[d]);return b};var U=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,
P={},D={}.hasOwnProperty;u.trust=function(b){null==b&&(b="");return w("<",void 0,void 0,b,void 0,void 0)};u.fragment=function(b,d){return w("[",b.key,b,w.normalizeChildren(d),void 0,void 0)};var x=function(b){function d(b,a){return function L(d){var y;try{if(!a||null==d||"object"!==typeof d&&"function"!==typeof d||"function"!==typeof(y=d.then))l(function(){a||0!==b.length||console.error("Possible unhandled promise rejection:",d);for(var e=0;e<b.length;e++)b[e](d);m.length=0;n.length=0;t.state=a;t.retry=
function(){L(d)}});else{if(d===f)throw new TypeError("Promise can't be resolved w/ itself");e(y.bind(d))}}catch(W){k(W)}}}function e(b){function a(a){return function(b){0<d++||a(b)}}var d=0,e=a(k);try{b(a(h),e)}catch(L){e(L)}}if(!(this instanceof x))throw Error("Promise must be called with `new`");if("function"!==typeof b)throw new TypeError("executor must be a function");var f=this,m=[],n=[],h=d(m,!0),k=d(n,!1),t=f._instance={resolvers:m,rejectors:n},l="function"===typeof setImmediate?setImmediate:
setTimeout;e(b)};x.prototype.then=function(b,d){function e(b,d,e,h){d.push(function(a){if("function"!==typeof b)e(a);else try{m(b(a))}catch(v){n&&n(v)}});"function"===typeof f.retry&&h===f.state&&f.retry()}var f=this._instance,m,n,h=new x(function(b,d){m=b;n=d});e(b,f.resolvers,m,!0);e(d,f.rejectors,n,!1);return h};x.prototype["catch"]=function(b){return this.then(null,b)};x.resolve=function(b){return b instanceof x?b:new x(function(d){d(b)})};x.reject=function(b){return new x(function(d,e){e(b)})};
x.all=function(b){return new x(function(d,e){var f=b.length,m=0,n=[];if(0===b.length)d([]);else for(var h=0;h<b.length;h++)(function(h){function t(b){m++;n[h]=b;m===f&&d(n)}null==b[h]||"object"!==typeof b[h]&&"function"!==typeof b[h]||"function"!==typeof b[h].then?t(b[h]):b[h].then(t,e)})(h)})};x.race=function(b){return new x(function(d,e){for(var f=0;f<b.length;f++)b[f].then(d,e)})};"undefined"!==typeof window?("undefined"===typeof window.Promise&&(window.Promise=x),x=window.Promise):"undefined"!==
typeof global&&("undefined"===typeof global.Promise&&(global.Promise=x),x=global.Promise);var E=function(b){function d(b,f){if(Array.isArray(f))for(var h=0;h<f.length;h++)d(b+"["+h+"]",f[h]);else if("[object Object]"===Object.prototype.toString.call(f))for(h in f)d(b+"["+h+"]",f[h]);else e.push(encodeURIComponent(b)+(null!=f&&""!==f?"="+encodeURIComponent(f):""))}if("[object Object]"!==Object.prototype.toString.call(b))return"";var e=[],f;for(f in b)d(f,b[f]);return e.join("&")},X=/^file:\/\//i,G=
function(b,d){function e(){function a(){0===--b&&"function"===typeof A&&A()}var b=0;return function I(d){var e=d.then;d.then=function(){b++;var f=e.apply(d,arguments);f.then(a,function(d){a();if(0===b)throw d;});return I(f)};return d}}function f(a,b){if("string"===typeof a){var d=a;a=b||{};null==a.url&&(a.url=d)}return a}function m(a,b){if(null==b)return a;for(var d=a.match(/:[^\/]+/gi)||[],e=0;e<d.length;e++){var f=d[e].slice(1);null!=b[f]&&(a=a.replace(d[e],b[f]))}return a}function n(a,b){var d=
E(b);if(""!==d){var e=0>a.indexOf("?")?"?":"&";a+=e+d}return a}function h(a){try{return""!==a?JSON.parse(a):null}catch(v){throw Error(a);}}function k(a){return a.responseText}function t(a,b){if("function"===typeof a)if(Array.isArray(b))for(var d=0;d<b.length;d++)b[d]=new a(b[d]);else return new a(b);return b}var l=0,A;return{request:function(a,l){var y=e();a=f(a,l);var v=new d(function(d,e){null==a.method&&(a.method="GET");a.method=a.method.toUpperCase();var f="GET"===a.method||"TRACE"===a.method?
!1:"boolean"===typeof a.useBody?a.useBody:!0;"function"!==typeof a.serialize&&(a.serialize="undefined"!==typeof FormData&&a.data instanceof FormData?function(a){return a}:JSON.stringify);"function"!==typeof a.deserialize&&(a.deserialize=h);"function"!==typeof a.extract&&(a.extract=k);a.url=m(a.url,a.data);f?a.data=a.serialize(a.data):a.url=n(a.url,a.data);var l=new b.XMLHttpRequest,y=!1,v=l.abort;l.abort=function(){y=!0;v.call(l)};l.open(a.method,a.url,"boolean"===typeof a.async?a.async:!0,"string"===
typeof a.user?a.user:void 0,"string"===typeof a.password?a.password:void 0);a.serialize!==JSON.stringify||!f||a.headers&&a.headers.hasOwnProperty("Content-Type")||l.setRequestHeader("Content-Type","application/json; charset=utf-8");a.deserialize!==h||a.headers&&a.headers.hasOwnProperty("Accept")||l.setRequestHeader("Accept","application/json, text/*");a.withCredentials&&(l.withCredentials=a.withCredentials);a.timeout&&(l.timeout=a.timeout);for(var A in a.headers)({}).hasOwnProperty.call(a.headers,
A)&&l.setRequestHeader(A,a.headers[A]);"function"===typeof a.config&&(l=a.config(l,a)||l);l.onreadystatechange=function(){if(!y&&4===l.readyState)try{var b=a.extract!==k?a.extract(l,a):a.deserialize(a.extract(l,a));if(a.extract!==k||200<=l.status&&300>l.status||304===l.status||X.test(a.url))d(t(a.type,b));else{var f=Error(l.responseText);f.code=l.status;f.response=b;e(f)}}catch(z){e(z)}};f&&null!=a.data?l.send(a.data):l.send()});return!0===a.background?v:y(v)},jsonp:function(a,h){var y=e();a=f(a,
h);var v=new d(function(d,e){var f=a.callbackName||"_mithril_"+Math.round(1E16*Math.random())+"_"+l++,h=b.document.createElement("script");b[f]=function(e){h.parentNode.removeChild(h);d(t(a.type,e));delete b[f]};h.onerror=function(){h.parentNode.removeChild(h);e(Error("JSONP request failed"));delete b[f]};null==a.data&&(a.data={});a.url=m(a.url,a.data);a.data[a.callbackKey||"callback"]=f;h.src=n(a.url,a.data);b.document.documentElement.appendChild(h)});return!0===a.background?v:y(v)},setCompletionCallback:function(a){A=
a}}}(window,x),T=function(b){function d(g,c){if(g.state!==c)throw Error("`vnode.state` must not be modified");}function e(g){var c=g.state;try{return this.apply(c,arguments)}finally{d(g,c)}}function f(g,c,a,b,d,e,f){for(;a<b;a++){var r=c[a];null!=r&&m(g,r,d,f,e)}}function m(g,c,a,b,d){var r=c.tag;null==c.reuse&&(c.reuse=null==c.key);if("string"===typeof r)switch(c.state={},null!=c.attrs&&K(c.attrs,c,a),r){case "#":return c.dom=z.createTextNode(c.children),v(g,c.dom,d),c.dom;case "<":return n(g,c,
d);case "[":var e=z.createDocumentFragment();c.reuse=!1;null!=c.children&&(r=c.children,f(e,r,0,r.length,a,null,b));c.dom=e.firstChild;c.domSize=e.childNodes.length;v(g,e,d);return e;default:var p=c.tag,l=(r=c.attrs)&&r.is;p=(b=c.attrs&&c.attrs.xmlns||H[c.tag]||b)?l?z.createElementNS(b,p,{is:l}):z.createElementNS(b,p):l?z.createElement(p,{is:l}):z.createElement(p);c.dom=p;if(null!=r)for(e in l=b,r)C(c,e,null,r[e],l);R(c)&&(c.reuse=!1);v(g,p,d);null!=c.attrs&&null!=c.attrs.contenteditable?y(c):(null!=
c.text&&(""!==c.text?p.textContent=c.text:c.children=[w("#",void 0,void 0,c.text,void 0,void 0)]),null!=c.children&&(g=c.children,f(p,g,0,g.length,a,null,b),g=c.attrs,"select"===c.tag&&null!=g&&("value"in g&&C(c,"value",null,g.value,void 0),"selectedIndex"in g&&C(c,"selectedIndex",null,g.selectedIndex,void 0))));return p}else return h(c,a),null!=c.instance?(a=m(g,c.instance,a,b,d),c.dom=c.instance.dom,c.domSize=null!=c.dom?c.instance.domSize:0,v(g,a,d),c=a):(c.domSize=0,c=E),c}function n(g,c,a){var r=
{caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"}[(c.children.match(/^\s*?<(\w+)/im)||[])[1]]||"div";r=z.createElement(r);r.innerHTML=c.children;c.dom=r.firstChild;c.domSize=r.childNodes.length;c.reuse=!1;c=z.createDocumentFragment();for(var b;b=r.firstChild;)c.appendChild(b);v(g,c,a);return c}function h(g,c){if("function"===typeof g.tag.view){g.state=Object.create(g.tag);var a=g.state.view;if(null!=a.$$reentrantLock$$)return E;
a.$$reentrantLock$$=!0}else{g.state=void 0;a=g.tag;if(null!=a.$$reentrantLock$$)return E;a.$$reentrantLock$$=!0;g.state=null!=g.tag.prototype&&"function"===typeof g.tag.prototype.view?new g.tag(g):g.tag(g)}null!=g.attrs&&K(g.attrs,g,c);K(g.state,g,c);g.instance=w.normalize(e.call(g.state.view,g));if(g.instance===g)throw Error("A view cannot return the vnode it received as argument");a.$$reentrantLock$$=null}function k(g,c,r,b,d,e,h){if(!(c===r&&!b||null==c&&null==r))if(null==c)f(g,r,0,r.length,d,
e,h);else if(null==r)x(c,0,c.length,null,b);else{for(var p=0,m=Math.min(c.length,r.length),n,y=r.pool=c.pool||Object.create(null),q,k;p<m;p++){if(null!=c[p]){n=null!=c[p].key;break}if(null!=r[p]){n=null!=r[p].key;break}}if(!1===n)for(;p<m;p++)q=c[p],k=r[p],q===k&&!b||null==q&&null==k||(null==q?t(g,k,d,a(c,p+1,e),h,y,p):null==k?I(q,y,b,p):l(g,q,k,d,a(c,p+1,e),b,h));m=p;for(var B=c.length-1,F=r.length-1,J;B>=m&&F>=p;)if(q=c[m],k=r[p],q===k&&!b||null==q&&null==k)m++,p++;else if(null==q)m++;else if(null==
k)p++;else if(q.key===k.key)m++,p++,l(g,q,k,d,a(c,m,e),b,h);else if(q=c[B],q!==k||b)if(null==q)B--;else if(null==k)p++;else if(q.key===k.key)l(g,q,k,d,a(c,B+1,e),b,h),p<F&&v(g,A(k),a(c,m,e)),B--,p++;else break;else B--,p++;for(;B>=m&&F>=p;)if(q=c[B],k=r[F],q!==k||b)if(null==q)B--;else{if(null!=k)if(q.key===k.key)l(g,q,k,d,a(c,B+1,e),b,h),null!=q.dom&&(e=q.dom),B--;else{if(null==J){J=c;q=B;var w={},u;for(u=0;u<q;u++){var C=J[u];null!=C&&(C=C.key,null!=C&&(w[C]=u))}J=w}null!=k&&(q=J[k.key],null!=q?
(q=c[q],l(g,q,k,d,e,b,h),v(g,A(k),e),q.skip=!0):t(g,k,d,e,h,y,k.key),null!=k.dom&&(e=k.dom))}F--}else B--,F--;if(null==n)for(;p<F+1;p++)if(null!=r[p]){n=null!=r[p].key;break}for(;p<F+1;p++)k=r[p],null!=k&&t(g,k,d,e,h,y,n?k.key:p);x(c,m,B+1,y,b)}}function t(g,c,a,b,d,e,f){var r;f in e&&null!=(r=e[f])&&null==r.domSize?(l(g,r,c,a,b,!0,d),v(g,A(c),b),e[f]=null):m(g,c,a,d,b)}function l(g,c,a,b,d,f,t){if(f&&!c.reuse)return m(g,a,b,t,d);var p=c.tag;if(p===a.tag){a.state=c.state;a.events=c.events;a.reuse=
c.reuse;var r;if(r=!f){if(null!=a.attrs&&"function"===typeof a.attrs.onbeforeupdate){a.reuse=!1;var v=e.call(a.attrs.onbeforeupdate,a,c)}if("string"!==typeof a.tag&&"function"===typeof a.state.onbeforeupdate){a.reuse=!1;var B=e.call(a.state.onbeforeupdate,a,c)}void 0===v&&void 0===B||v||B?r=!1:(a.dom=c.dom,a.domSize=c.domSize,a.instance=c.instance,r=!0)}if(!r)if("string"===typeof p)switch(null!=a.attrs&&(f?(a.state={},K(a.attrs,a,b)):D(a.attrs,a,b)),p){case "#":c.children.toString()!==a.children.toString()&&
(c.dom.nodeValue=a.children);a.dom=c.dom;break;case "<":c.children!==a.children?(A(c),n(g,a,d)):(a.dom=c.dom,a.domSize=c.domSize);break;case "[":k(g,c.children,a.children,f,b,d,t);c=0;b=a.children;a.dom=null;if(null!=b){for(f=0;f<b.length;f++){var q=b[f];null!=q&&null!=q.dom&&(null==a.dom&&(a.dom=q.dom),c+=q.domSize||1)}1!==c&&(a.domSize=c)}break;default:g=a.dom=c.dom;t=a.attrs&&a.attrs.xmlns||H[a.tag]||t;"textarea"===a.tag&&(null==a.attrs&&(a.attrs={}),null!=a.text&&(a.attrs.value=a.text,a.text=
void 0));d=c.attrs;p=a.attrs;r=t;if(null!=p)for(q in p)C(a,q,d&&d[q],p[q],r);if(null!=d)for(q in d)null!=p&&q in p||("className"===q&&(q="class"),"o"!==q[0]||"n"!==q[1]||Q(q)?"key"!==q&&a.dom.removeAttribute(q):S(a,q,void 0));null!=a.attrs&&null!=a.attrs.contenteditable?y(a):null!=c.text&&null!=a.text&&""!==a.text?c.text.toString()!==a.text.toString()&&(c.dom.firstChild.nodeValue=a.text):(null!=c.text&&(c.children=[w("#",void 0,void 0,c.text,void 0,c.dom.firstChild)]),null!=a.text&&(a.children=[w("#",
void 0,void 0,a.text,void 0,void 0)]),k(g,c.children,a.children,f,b,null,t))}else{if(f)h(a,b);else{a.instance=w.normalize(e.call(a.state.view,a));if(a.instance===a)throw Error("A view cannot return the vnode it received as argument");null!=a.attrs&&D(a.attrs,a,b);D(a.state,a,b)}null!=a.instance?(null==c.instance?m(g,a.instance,b,t,d):l(g,c.instance,a.instance,b,d,f,t),a.dom=a.instance.dom,a.domSize=a.instance.domSize):null!=c.instance?(I(c.instance,null,f,0),a.dom=void 0,a.domSize=0):(a.dom=c.dom,
a.domSize=c.domSize)}}else I(c,null,f,0),m(g,a,b,t,d)}function A(a){var c=a.domSize;if(null!=c||null==a.dom){var g=z.createDocumentFragment();if(0<c){for(a=a.dom;--c;)g.appendChild(a.nextSibling);g.insertBefore(a,g.firstChild)}return g}return a.dom}function a(a,c,b){for(;c<a.length;c++)if(null!=a[c]&&null!=a[c].dom)return a[c].dom;return b}function v(a,c,b){b?a.insertBefore(c,b):a.appendChild(c)}function y(a){var c=a.children;if(null!=c&&1===c.length&&"<"===c[0].tag)c=c[0].children,a.dom.innerHTML!==
c&&(a.dom.innerHTML=c);else if(null!=a.text||null!=c&&0!==c.length)throw Error("Child node of a contenteditable must be trusted");}function x(a,c,b,d,e){for(;c<b;c++){var g=a[c];null!=g&&(g.skip?g.skip=!1:I(g,d,e,c))}}function I(a,c,b,f){function g(){if(++h===p&&(b||(d(a,t),u(a)),a.dom)){var g=a.domSize||1;if(1<g)for(var e=a.dom;--g;){var l=e.nextSibling,k=l.parentNode;null!=k&&k.removeChild(l)}g=a.dom;e=g.parentNode;null!=e&&e.removeChild(g);null!=a.key&&(f=a.key);null!=c&&a.reuse&&(null!=a.key&&
(f=a.key),null!=f&&(c[f]=a))}}var p=1,h=0;if(!b){var t=a.state;if(a.attrs&&"function"===typeof a.attrs.onbeforeremove){a.reuse=!1;var l=e.call(a.attrs.onbeforeremove,a);null!=l&&"function"===typeof l.then&&(p++,l.then(g,g))}"string"!==typeof a.tag&&"function"===typeof a.state.onbeforeremove&&(a.reuse=!1,l=e.call(a.state.onbeforeremove,a),null!=l&&"function"===typeof l.then&&(p++,l.then(g,g)))}g()}function u(a){a.attrs&&"function"===typeof a.attrs.onremove&&(a.reuse=!1,e.call(a.attrs.onremove,a));
if("string"!==typeof a.tag)"function"===typeof a.state.onremove&&(a.reuse=!1,e.call(a.state.onremove,a)),null!=a.instance&&(u(a.instance),a.reuse=a.reuse&&a.instance.reuse);else if(a=a.children,Array.isArray(a))for(var c=0;c<a.length;c++){var b=a[c];null!=b&&u(b)}}function C(a,c,b,d,e){if("key"!==c&&"is"!==c&&!Q(c)){if("o"===c[0]&&"n"===c[1])return S(a,c,d);if((b!==d||"value"===c||"checked"===c||"selectedIndex"===c||"selected"===c&&a.dom===z.activeElement||a.dom.parentNode===z.activeElement||"object"===
typeof d)&&void 0!==d){var g=a.dom;if("xlink:"===c.slice(0,6))g.setAttributeNS("http://www.w3.org/1999/xlink",c,d);else if("style"===c)if(a=b,null!=a&&null!=d&&"object"===typeof a&&"object"===typeof d&&d!==a){for(var f in d)d[f]!==a[f]&&(g.style[f]=d[f]);for(f in a)f in d||(g.style[f]="")}else if(a===d&&(g.style.cssText="",a=null),null==d)g.style.cssText="";else if("string"===typeof d)g.style.cssText=d;else for(f in"string"===typeof a&&(g.style.cssText=""),d)g.style[f]=d[f];else if(c in g&&"href"!==
c&&"list"!==c&&"form"!==c&&"width"!==c&&"height"!==c&&void 0===e&&!R(a)){if("value"===c){f=""+d;if(("input"===a.tag||"textarea"===a.tag)&&a.dom.value===f&&a.dom===z.activeElement)return;if("select"===a.tag)if(null===d){if(-1===a.dom.selectedIndex&&a.dom===z.activeElement)return}else if(null!==b&&a.dom.value===f&&a.dom===z.activeElement)return;if("option"===a.tag&&null!=b&&a.dom.value===f)return}"input"===a.tag&&"type"===c?g.setAttribute(c,d):g[c]=d}else"boolean"===typeof d?d?g.setAttribute(c,""):
g.removeAttribute(c):g.setAttribute("className"===c?"class":c,d)}}}function Q(a){return"oninit"===a||"oncreate"===a||"onupdate"===a||"onremove"===a||"onbeforeremove"===a||"onbeforeupdate"===a}function R(a){return null!=a.attrs&&null!=a.attrs.is||-1<a.tag.indexOf("-")}function M(){}function S(a,c,b){null!=a.events?a.events[c]!==b&&(null==b||"function"!==typeof b&&"object"!==typeof b?(null!=a.events[c]&&a.dom.removeEventListener(c.slice(2),a.events,!1),a.events[c]=void 0):(null==a.events[c]&&a.dom.addEventListener(c.slice(2),
a.events,!1),a.events[c]=b)):null==b||"function"!==typeof b&&"object"!==typeof b||(a.events=new M,a.dom.addEventListener(c.slice(2),a.events,!1),a.events[c]=b)}function K(a,c,b){"function"===typeof a.oninit&&e.call(a.oninit,c);"function"===typeof a.oncreate&&(c.reuse=!1,b.push(e.bind(a.oncreate,c)))}function D(a,c,b){"function"===typeof a.onupdate&&(c.reuse=!1,b.push(e.bind(a.onupdate,c)))}var z=b.document,E=z.createDocumentFragment(),H={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},
G;M.prototype=Object.create(null);M.prototype.handleEvent=function(a){var c=this["on"+a.type];"function"===typeof c?c.call(a.target,a):"function"===typeof c.handleEvent&&c.handleEvent(a);"function"===typeof G&&G.call(a.target,a)};return{render:function(a,c){if(!a)throw Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var b=[],d=z.activeElement,e=a.namespaceURI;null==a.vnodes&&(a.textContent="");Array.isArray(c)||(c=[c]);k(a,a.vnodes,w.normalizeChildren(c),
!1,b,null,"http://www.w3.org/1999/xhtml"===e?void 0:e);a.vnodes=c;null!=d&&z.activeElement!==d&&d.focus();for(d=0;d<b.length;d++)b[d]()},setEventCallback:function(a){return G=a}}},H=function(b,d){function e(b){b=n.indexOf(b);-1<b&&n.splice(b,2)}function f(){if(h)throw Error("Nested m.redraw.sync() call");h=!0;for(var b=1;b<n.length;b+=2)try{n[b]()}catch(l){"undefined"!==typeof console&&console.error(l)}h=!1}var m=T(b);m.setEventCallback(function(b){!1===b.redraw?b.redraw=void 0:k()});var n=[],h=!1,
k=(d||V)(f);k.sync=f;return{subscribe:function(b,d){e(b);n.push(b,d)},unsubscribe:e,redraw:k,render:m.render}}(window);G.setCompletionCallback(H.redraw);u.mount=function(b){return function(d,e){if(null===e)b.render(d,[]),b.unsubscribe(d);else{if(null==e.view&&"function"!==typeof e)throw Error("m.mount(element, component) expects a component, not a vnode");var f=function(){b.render(d,w(e))};b.subscribe(d,f);f()}}}(H);var Y=x,N=function(b){if(""===b||null==b)return{};"?"===b.charAt(0)&&(b=b.slice(1));
b=b.split("&");for(var d={},e={},f=0;f<b.length;f++){var m=b[f].split("="),n=decodeURIComponent(m[0]);m=2===m.length?decodeURIComponent(m[1]):"";"true"===m?m=!0:"false"===m&&(m=!1);var h=n.split(/\]\[?|\[/),k=d;-1<n.indexOf("[")&&h.pop();for(var t=0;t<h.length;t++){n=h[t];var l=h[t+1];l=""==l||!isNaN(parseInt(l,10));var A=t===h.length-1;""===n&&(n=h.slice(0,t).join(),null==e[n]&&(e[n]=0),n=e[n]++);null==k[n]&&(k[n]=A?m:l?[]:{});k=k[n]}}return d},Z=function(b){function d(d){var e=b.location[d].replace(/(?:%[a-f89][a-f0-9])+/gim,
decodeURIComponent);"pathname"===d&&"/"!==e[0]&&(e="/"+e);return e}function e(b){return function(){null==h&&(h=n(function(){h=null;b()}))}}function f(b,d,e){var a=b.indexOf("?"),f=b.indexOf("#"),h=-1<a?a:-1<f?f:b.length;if(-1<a){a=N(b.slice(a+1,-1<f?f:b.length));for(var k in a)d[k]=a[k]}if(-1<f)for(k in d=N(b.slice(f+1)),d)e[k]=d[k];return b.slice(0,h)}var m="function"===typeof b.history.pushState,n="function"===typeof setImmediate?setImmediate:setTimeout,h,k={prefix:"#!",getPath:function(){switch(k.prefix.charAt(0)){case "#":return d("hash").slice(k.prefix.length);
case "?":return d("search").slice(k.prefix.length)+d("hash");default:return d("pathname").slice(k.prefix.length)+d("search")+d("hash")}},setPath:function(d,e,h){var a={},l={};d=f(d,a,l);if(null!=e){for(var n in e)a[n]=e[n];d=d.replace(/:([^\/]+)/g,function(b,d){delete a[d];return e[d]})}(n=E(a))&&(d+="?"+n);(l=E(l))&&(d+="#"+l);m?(l=h?h.state:null,n=h?h.title:null,b.onpopstate(),h&&h.replace?b.history.replaceState(l,n,k.prefix+d):b.history.pushState(l,n,k.prefix+d)):b.location.href=k.prefix+d},defineRoutes:function(d,
h,n){function a(){var a=k.getPath(),e={},l=f(a,e,e),m=b.history.state;if(null!=m)for(var t in m)e[t]=m[t];for(var u in d)if(m=new RegExp("^"+u.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$"),m.test(l)){l.replace(m,function(){for(var b=u.match(/:[^\/]+/g)||[],f=[].slice.call(arguments,1,-2),k=0;k<b.length;k++)e[b[k].replace(/:|\./g,"")]=decodeURIComponent(f[k]);h(d[u],e,a,u)});return}n(a,e)}m?b.onpopstate=e(a):"#"===k.prefix.charAt(0)&&(b.onhashchange=a);a()}};return k};u.route=
function(b,d){var e=Z(b),f=function(a){return a},m,n,h,k,t,l=function(a,b,l){function y(){null!=m&&d.render(a,m(w(n,h.key,h)))}if(null==a)throw Error("Ensure the DOM element that was passed to `m.route` is not undefined");var u=function(){y();u=d.redraw};d.subscribe(a,y);var v=function(a){if(a!==b)e.setPath(b,null,{replace:!0});else throw Error("Could not resolve default route "+b);};e.defineRoutes(l,function(a,b,d){var e=t=function(a,l){e===t&&(n=null==l||"function"!==typeof l.view&&"function"!==
typeof l?"div":l,h=b,k=d,t=null,m=(a.render||f).bind(a),u())};a.view||"function"===typeof a?e({},a):a.onmatch?Y.resolve(a.onmatch(b,d)).then(function(b){e(a,b)},v):e(a,"div")},v)};l.set=function(a,b,d){null!=t&&(d=d||{},d.replace=!0);t=null;e.setPath(a,b,d)};l.get=function(){return k};l.prefix=function(a){e.prefix=a};var u=function(a,b){b.dom.setAttribute("href",e.prefix+b.attrs.href);b.dom.onclick=function(b){b.ctrlKey||b.metaKey||b.shiftKey||2===b.which||(b.preventDefault(),b.redraw=!1,b=this.getAttribute("href"),
0===b.indexOf(e.prefix)&&(b=b.slice(e.prefix.length)),l.set(b,void 0,a))}};l.link=function(a){return null==a.tag?u.bind(u,a):u({},a)};l.param=function(a){return"undefined"!==typeof h&&"undefined"!==typeof a?h[a]:h};return l}(window,H);u.withAttr=function(b,d,e){return function(f){d.call(e||this,b in f.currentTarget?f.currentTarget[b]:f.currentTarget.getAttribute(b))}};var aa=T(window);u.render=aa.render;u.redraw=H.redraw;u.request=G.request;u.jsonp=G.jsonp;u.parseQueryString=N;u.buildQueryString=
E;u.version="1.1.3";u.vnode=w;"undefined"!==typeof module?module.exports=u:window.m=u})();